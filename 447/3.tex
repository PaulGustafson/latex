\documentclass{article}
\usepackage{../m}
\newcommand{\osc}{\mathrm{osc}}

\begin{document}
\noindent Paul Gustafson\\
\noindent Texas A\&M University - Math 447\\ 
\noindent Instructor: Dr. Johnson

\subsection*{HW 3, due Thurs., February 14}
\p{17.7} If $f: D\to \R$ is measurable and $g: \R \to \R$ is continuous, show that $g \circ f$ is measurable.
\begin{proof}
Let $U \subset \R$ be open.  Then $g^{-1}(U)$ is open, so $(g \circ f)^{-1}(U) = f^{-1}(g^{-1}(U))$ is measurable.
\end{proof}
\p{11} Let $G \subset [0,1]$ be open, containing the interval rationals, and having $m(G) < 1/2$. Prove that $f = \chi_G$ is Borel measurable but cannot be equal a.e. to a Riemann integrable function.
\begin{proof}
$f$ is obviously Borel measurable.  For the other conclusion, suppose $g = f$ on $[0,1]\setminus N$ where $m(N) = 0$. Then $g = 1$ on $H:=G \setminus N$, and $g=0$ on $C:= ([0,1]\setminus G)\setminus N$. Note that $m(C) = 1 - m(G) > 1/2$. Hence, it suffices to show that $H$ is dense, for then every point of $C$ will be a point of discontinuity of $g$.

To see that $H$ is dense, let $U \subset [0,1]$ be open.  Since $G$ is open and dense, there exists an interval $I \subset (G \cap U)$. Since $m(N) = 0$, $N$ cannot contain $I$. Hence, $I \cap H = I \cap (G\setminus N) \ne \emptyset$. Thus, $H$ intersects $U$.
\end{proof}
\p{12} If $f : [a,b] \to \R$ is Lipschitz with constant $K$, and if $E \subset [a,b]$, show that $m^*(f(E)) \le K m^*(E)$. In particular, $f$ maps null sets to null sets.
\begin{proof}
Consider the case when $E$ is an interval. Then, by the Lipschitz condition, $m^*(f(E)) \le \sup_{x,y \in E} |f(x) - f(y)| \le \sup_{x,y \in E} K |x-y| = K m(E)$.

For the general case, let $\epsilon > 0$, and let $(I_n)$ be a cover of $E$ by open intervals such that $\sum_n m(I_n) \le m^*(E) + \epsilon$. Then $(f(I_n))$ covers $f(E)$, so by the special case above, $m^*(f(E)) \le \sum_n m^*(f(I_n)) \le \sum_n K m^*(I_n) \le Km^*(E) + K\epsilon$.  Letting $\epsilon \to 0$ gives the desired inequality.
\end{proof}
\p{17} If $f,g: \R \to \R$ are Borel measurable, show that $f \circ g$ is Borel measurable. If $f$ is Borel measurable and $g$ is Lebesgue measurable, show that $f \circ g$ is Borel measurable.  If $f$ is Borel measurable and $g$ is Lebesgue measurable, show that $f \circ g$ is Lebesgue measurable.
\begin{proof}
Let $O$ denote the collection of all open sets in $\R$. By a theorem in class,  for any function $g$, we have $\sigma(g^{-1}(O)) = g^{-1}(\sigma(O))$.  Hence, if $U \subset \R$ is open  and $f$ is Borel measurable, we have
$(f\circ g)^{-1}(U) = g^{-1}(f^{-1}(U)) \in g^{-1}(\sigma(O)) = \sigma(g^{-1}(O))$.
\end{proof}
\p{18(e)} Show that there is a Lebesgue measurable function $F$ and a continuous function $G$ such that $F \circ G$ is not Lebesgue measurable.
\begin{proof}
Let $0<\alpha<1$ and $\Delta_\alpha$ be the corresponding Cantor-like set.  Since $m(\Delta_\alpha) > 0$, it contains an unmeasurable set $E$.  Let $G:\Delta_\alpha \to \Delta$ be a homeomorphism (We proved $\Delta$ homeomorphic to $\{0,1\}^\N$ in 446; the same proof goes through for $\Delta_\alpha$). Let $F = \chi_{G(E)}$.
Note that $m^*(G(E)) \le m^*(\Delta) = 0$, so $G(E)$ is measurable. Hence, $F$ is measurable.  However, $(F\circ G)^{-1}((1/2, \infty)) = G^{-1}(F^{-1}((1/2,\infty)) = G^{-1}(G(E)) = E$ is unmeasurable.
\end{proof}
\p{37} Give an example showing that a. u. convergence does not imply uniform convergence a.e.
\begin{proof}
Let $f_n:[0,1] \to [0,1]$ be defined by $f_n(x) = x^n$. On $[0,c]$, $f_n \le c^n$ converges uniformly.  Since $c$ can be picked arbitrarily close to 1, $f$ converges a.u.  

On the other hand, suppose $f_n$ converged uniformly on $[0,1] \setminus N$ with $m(N) = 0$. Since $N$ cannot contain an interval, there exists a sequence $(x_n) \subset [0,1] \setminus N$ with $x_n \to 1$.  By the uniform convergence, pick $N$ such that $\forall n \ge N$, $\sup_{[0,1)}|f_n| < 1/2$.  Pick $M$ such that $x_M > (1/2)^{1/N}$. Then $f_N(x_M) > 1/2$, a contradiction.
\end{proof}
\p{40} If $f$ is Lebesgue measurable, prove that there is a Borel measurable function $g$ such that $f = g$ except, possibly, on a Borel set of measure zero. [Hint: Every null set is contained in a Borel set of measure zero.]
\begin{proof}
To justify the hint, if $N$ is a null set, there exist open sets $U_n \supset N$ with $m(U_n) = 1/n$. The required Borel set is $\bigcap_n U_n$.

Since $f$ is measurable, $f^+$ and $f^-$ are measurable.  If we find Borel functions $g^+$, $g^-$  such that $f^+ = g^+$  except on a Borel set of measure zero and the same for $g^-$, then $f = f^+ - f^- = g^+ - g^-$ except on the union of Borel null sets, which is also a Borel null set. Moreover, $g^+ -  g^-$ is Borel measurable since $g^+$ and $g^-$ are Borel (the proof that the Lebesgue functions form a vector space works verbatim for Borel functions). Thus, by breaking up $f$ into positive and negative parts, we may assume that $f > 0$.

Then there exist simple functions $f_n \to f$ with $0 \le f_n \le f_{n+1}$.  Write $f_n = \sum_{i=0}^m a_i \chi_{A_i}$ in standard form. For each $i$, we have $A_i = B_i \cup N_{n,i}$ where $B_i$ is Borel, and $N_i$ is a null set.  Let $\widetilde{N} = \bigcup_{n,i} N_{n,i}$. By the hint, there exists a Borel null set $N \supset \widetilde{N}$.  Define $g_n :=  \sum_{i=0}^m a_i \chi_{A_i \setminus N}$. Since $A_i \setminus N = B_i \cup N_{n,i} \setminus N = B_i \setminus N$, each $g_n$ is Borel.  

To see that $g := \lim_{n\to \infty} g_n$ is Borel, first note that $g^n$ is increasing on $N^c$ since $g_n = f_n$ on $N^c$.  Moreover, $g^n = 0$ on $N$ for all $n$.  Hence, $g^n$ are increasing on $\R$. Thus, for all $a\in\R$, we have $g^{-1}((a, \infty)) = \bigcup_n g_n^{-1}((a,\infty))$ is a Borel set, so $g$ is a Borel function.

Moreover, $g_n = f_n$ on $N^c$, so $g = f$ on $N^c$. 
%%UNNEEDED
\begin{comment}
Let $(A_n)$ be a countable base for $\R$ such that $\sup_n \diam(A_n) < 1/2$. Since $f$ is measurable, for each $n$, there exist a Borel set $B_n$ and a null set $\widetilde{N_n}$ disjoint from $B_n$ such that $f^{-1}(A_n) = B_n \cup \widetilde{N_n}$. By the hint, then, $f^{-1}(A_n) \subset B_n \cup N_n$ for some null Borel set $N_n$. Let $N := \bigcup_n N_n$.

Let $g := \chi_{N^c} f$. Let $d:\R \to \R^2$ is the diagonal map, and $\mu:\R^2 \to R$ be the multiplication map. Then $g = \mu \circ (f, \chi_{N^c}) \circ d$. Note that $(A_n \times A_m)_{n,m}$ is a countable base for $\R^2$. 

Let $U \subset \R$ be open.  Since $\mu$ is continuous, $\mu^{-1} (U)$ is open so can be written as $\mu^{-1} (U) = \bigcup_{(n,m) \in C} A_n \times A_m$ for some countable set $C$.  Note that for each $n,m$, we have $(f, \chi_{N^c})^{-1}(A_n \times A_m) = f^{-1}(A_n) \times \chi_{N^c}^{-1} (A_m) = (B_n \cup N_n) \times (\emptyset \text{ or } N^c \text{ or } N)$, where the last equality follows from the fact that $\diam(A_m) < 1/2$ (so $\chi_{N^c}^{-1} (A_m) \ne \R$).  Applying $d^{-1}$ is just taking the intersection, so $d^{-1}((f, \chi_{N^c})^{-1}(A_n \times A_m)) = (B_n \cup N_n) \cap (\emptyset \text{ or } N^c \text{ or } N)$
\end{comment}

% if $0 \in A_n$, then $g^{-1}(A_n) = B_n \cup N$. Otherwise, $g^{-1}(A_n) = B_n \setminus N$.
%% CHECKME ^^^^

% If $U$ is open, $g^{-1}(U) = g^{-1}(\bigcup\{A_n : A_n \subset U\}) = \bigcup g^{-1}(\{A_n : A_n \subset U\}) = \bigcup B_n : A_n \subset $
\end{proof}
\p{41} Let $E \subset \R$ be closed, and let $f:E\to \R$ be continuous. Prove that $f$ extends to a continuous function $g:\R\to\R$ with $\sup_\R |g| \le \sup_E |f|$.
\begin{proof}
%%FIXME
$E^c$ is an open set, hence the union of disjoint open intervals $(I_n)$. If $E$ is empty, set $g:= 0$.  Otherwise, $(I_n)$ contains at most two semi-infinite intervals. Set the constant value of $g$ on any such interval to the value of $f$ at the finite endpoint.  For any bounded interval $(a,b)$ of $(I_n)$, set $g$ to be the linear function interpolating the points $(a, f(a))$ and $(b,f(b))$.

By construction, $\sup_\R |g| \le \sup_E |f|$, and $g$ is continuous on $E_c$.  It is given that $g$ is continuous on the interior of $E$.  The remaining case is to check that $g$ is continuous on the boundary of $E$.

Let $x \in E$ be a boundary point of $E$.  I will check right continuity; the left continuity case is analogous.

 If $x$ is an isolated point of $E \cap [x, \infty)$, then pick an open interval $U$ containing $x$ such that $U \cap E \cap [x, \infty) = x$.  By construction, $g$ is linear hence continuous on $U \cap [x,\infty)$.

If $x$ is not an isolated point of $E \cap [x, \infty)$, let $\epsilon > 0$. By the continuity of $f$, pick $\delta>0$ such that $\osc(f, (B_\delta(x) \cap E \cap [x,\infty)) < \epsilon$. Since $x$ is a limit point of $E \cap [x, \infty)$, there exists $y \in B_\delta(x) \cap E \cap (x,\infty)$. Note that $\osc(g, [x,y]) \le \osc(f, [x,y]) \le \epsilon$. Hence, $g$ is right continuous at $x$.
\end{proof}
\p{43} Let $f: [a,b] \to [-\infty,\infty]$ be a measurable and finite a.e., and let $\epsilon > 0$. Show that there is a polynomial $p$ such that  $m(\{|f - p| \ge \epsilon\}) < \epsilon$.
\begin{proof} 
By Theorem 17.20, there exists a continuous function $g:[a,b] \to \R$ such that $m(\{|f - g| \ge \epsilon/2\}) < \epsilon/2$.  By the Weierstrauss approximation theorem, there exists $p$ such that $|g-p| < \epsilon/2$.  Then, 
since $|f - p| \le |f - g| + |g - p| = |f - g| + \epsilon/2$, we have

 $m(\{|f - p| \ge \epsilon\}) \le m(\{|f - g| + \epsilon/2 \ge \epsilon\}) \le m(\{|f - g| \ge \epsilon/2\})  < \epsilon/2.$
\end{proof}
\p{44} Let $f: [a,b] \to [-\infty,\infty]$ be a measurable and finite a.e. Prove that there is a sequence of polynomials $(g_n)$ on $[a,b]$ such that $g_n \to f$ a.e. on $[a,b]$. [Hint: For each $n$ choose $g_n$ so that the $E_n = \{|f-g_n| \ge 2^{-n}\}$ has $m(E_n) < 2^{-n}$. Now argue that $g_n \to f$ off the set $E = \limsup_{n\to\infty} E_n$.]
\begin{proof}
By (43), we can define $g_n$, $E_n$, and $E$ as in the hint. Since $\sum_n m(E_n) < \infty$, Corollary 16.24 implies $m(E) = 0$.  Suppose $x \not\in E$. Then there exists $N$ such that $x \not\in \bigcup_{n=N}^\infty E_n$. Thus, for $n \ge N$, we have $|f(x) - g_n(x)| < 2^{-n}$. Hence, $g_n(x) \to f(x)$.
\end{proof}
\p{45} Let $f: [a,b] \to [-\infty,\infty]$ be a measurable and finite a.e., and let $\epsilon >0$. Show that there is a continuous function $g$ on $[a,b]$ with $m\{f \ne g\} < \epsilon$. [Hint: Combine Exercises 41 and 44 and Egorov's theorem to find $(g_n)$ and a closed set $F$ with $m([a,b]\setminus F) < \epsilon$ and $g_n \to f$ uniformly on $F$. Now argue that $f|_F$ extends to a continuous function $g$.]
\begin{proof}
\begin{comment}
Let $\epsilon >0$.  Pick polynomials $g_n$ and a sets $E, E_k$ as in (44). Pick $N$ so large that $G := \bigcap_{n \le N} \bigcup_{k \ge n} E_k$ has $m(G) < \epsilon$. By the regularity of $m$, there exists a closed set $F$ such that $([a,b]\setminus F) \supset G$ and $m([a,b]\setminus F) < \epsilon$.

 Pick $N$ such that $2^{-N} <\epsilon/2$.  . Then, if $T := \bigcup_{n=N+1}^\infty E_n$, we have $m(T) < 2^{-N}$ and, for all $n>N$, we have $|g_n - f| < 2^{-N}$ on $T^c$. By the inner regularity of $m$, pick a closed set $F \subset T^c$ such that $m(T^c\setminus F) < \epsilon/2$. Then for all $n>N$, we have $|g_n - f| < 2^{-N}$ on $F$.

\end{comment}

\end{proof}
\p{46} (Luzin's Theorem) Show that $f: \R\to\R$ is measurable if and only if, for each $\epsilon >0$, there is a measurable set $E$ with $m(E) < \epsilon$ such that the restriction of $f$ to $\R\setminus E$ is continuous.
\begin{proof}
Break $\R$ into countably many disjoint compact intervals $(I_n)_{n=1}^\infty$ such that $m((\bigcup_n I_n)^c) < \epsilon/2$.  Apply (45) to $f$ on each $I_n$ to find continuous $g_n: I_n \to R$ and measurable $F_n \subset I_n$ with $m(I_n \setminus F_n) < \epsilon 2^{-n-1}$ such that $g_n = f$ on $F_n$. Let $E = \R \setminus \bigcup_n F_n$. Then $m(E) \le m((\bigcup_n I_n)^c) + m(\bigcup_n I_n \setminus F_n) \le \epsilon/2 + \epsilon/2$.

Note that since $F_n$ are disjoint, and $f = g_n$ on $F_n$ is continuous, we have $f$ is continuous on $\R \setminus E$.
\end{proof}
\p{48} Show that there is a measurable set $K \subset [0,1]$ such that $\chi_K$ is everywhere discontinuous in $[0,1] \setminus N$ for any null set $N$.
\begin{proof}
Let $A_n$ be a countable base for $[0,1]$ of open intervals. For each $A_n$, let $\Delta_n \subset A_n$ be a nowhere-dense, positive measure set (pick a generalized Cantor set out of $A_n$).  Let $K := \bigcup_n \Delta_n$. 

Let $N$ be a null set. To see that $K \setminus N$ is dense in $[0,1]$, let $U \subset \R$ be open and nonempty. Then for some $n$, $\Delta_n \subset A_n \subset U$.  Since $\Delta_n$ has positive measure, $\Delta_n \setminus N$ is nonempty.  Thus, $K \setminus N$ is dense in $[0,1]$, so $K$ is dense in $[0,1] \setminus N$.

Since $\Delta_n$ is nowhere dense, $K$ is first category. Thus,  by Corollary 9.12, $[0,1] \setminus K$ is dense in $[0,1]$, so $[0,1]\setminus K$ is dense in $[0,1] \setminus N$.  Thus, since $K\setminus N$ and $[0,1] \setminus (K\setminus N)$ are both dense in $[0,1] \setminus N$, we have that $\chi_{K}$ is everywhere discontinuous on $[0,1]\setminus N$. 
\end{proof}
\end{document}
